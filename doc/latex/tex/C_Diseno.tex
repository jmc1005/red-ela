\apendice{Especificación de diseño}

\section{Introducción}
En este anexo vamos a definir en base a los objetivos y especificaciones que datos va a manejar la aplicación, que estructura, arquitectura y diseño tendrá.

\section{Diseño de datos}
Nuestra aplicación cuenta con un diseño de base de datos \textbf{NoSQL}, lo que nos permite mediante la flexibilidad de la estructura de datos adaptarnos rápidamente a los requisitos y necesidades del negocio. Mediante los documentos que darán vida a nuestras entidades estructurados con formato JSON, nos permitirán crear una aplicación donde el usuario no esté relacionado directamente como sucede en las bases de datos relacionales y nos permita mayor rendimiento cuando la aplicación vaya creciendo.

A continuación, vamos a definir el diseño de datos con el que cuenta nuestra aplicación. Para poder entenderlo más rápidamente, vamos a representar cada elemento de nuestra aplicación como si fuera una una entidad relacional.
\imagenTam{diseño-datos}{Diseño de datos actores}{.7}
 
Otras entidades que necesitaremos para nuestra aplicación son:
\imagen{entidades}{Entidades}

\section{Diseño procedimental}
En este punto vamos a definir los aspectos más relevantes de la aplicación.

\subsection{Envío invitación}
Planteamos la idea de que en esta aplicación los usuarios que se puedan registrar en la aplicación sea a partir de invitaciones que llegarán al correo electrónico. Para poder recibir una invitación se tiene que tener en cuenta lo siguiente:
\begin{itemize}
	\item Administrador puede invitar a nuevos administradores o gestores de casos.
	\item Gestor de casos puede invitar a nuevos gestores de casos o pacientes.
	\item Paciente puede invitar a que se registre su cuidador personal.
\end{itemize}

\imagen{diagrama-secuencia-invitación}{Diagrama de secuencia invitar Usuario}

\subsection{Registro usuario invitado}
Una vez el usuario ha recibido la invitación, este se registrará mediante OTP, que es una contraseña de un solo uso y posteriormente rellenará los datos del registro. Una vez guardado, accederá a la pantalla principal.

\imagenTam{diagrama-secuencia-registro}{Diagrama de secuencia registro usuario}{.8}

\subsection{Crear cita gestor de casos}
lL gestión de las citas por parte del gestor de casos. En ella mostramos el diagrama de secuencia con la creación y borrado de una cita donde se notificará a los pacientes.
\imagen{diagrama-secuencia-gestor-casos}{Gestión citas Gestor de casos}

\section{Diseño arquitectónico}
Al elegir hacer la aplicación con Flutter nos vimos ante la necesidad de realizar una arquitectura limpia y por esa misma razón escogimos usar MVVM (Model-View-ViewModel) estructurando nuestras carpetas de la siguiente forma:
\begin{itemize}
	\item nuestro model contendrá las entidades que controla la aplicación
	\item nuestro view contendrá las vistas de la aplicación
	\item nuestro viewmodel hará de intermediario entre la parte de los datos y la interfaz.
\end{itemize}

\imagenTam{mvvm-pattern}{MVVM}{0.8}


